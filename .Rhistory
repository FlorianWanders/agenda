library(reshape2)
invisible(Sys.setlocale("LC_ALL","English"))
date <- as.POSIXlt(seq(as.Date("2015/07/01"), as.Date("2016/12/31"), "days")) #start on a Jul 01, end on Dec 31
dates <- format(date, "%d.%m") #31.01
ds <- format(date, "%d")       #31
days <- format(date, "%A")     #Monday
weeks <- strftime(date,format="%W") #1
months <- format(date, "%B")   #January
years <- format(date, "%Y")    #2015
df <- data.frame(date, dates, ds, days, weeks, months, years)
#dcast looses date format --> create dfcar with character entries of df
dfcar <- df
dfcar$days <- format(dfcar$date, "%a") #Mon
dfcar$days <- paste(dfcar$dates, dfcar$days, sep=" ") #31.01 Mon
dfcar <- apply(dfcar,1:2, function(x) as.character(x))
dfcar <- as.data.frame(dfcar)
#dcast will sort by alphabet --> create sort variable for later sorting
#http://seananderson.ca/2013/10/19/reshape.html
dfcar$sort <- ifelse(dfcar$months=="January", 1,
ifelse(df$months=="February", 2,
ifelse(df$months=="March", 3,
ifelse(df$months=="April", 4,
ifelse(df$months=="May", 5,
ifelse(df$months=="June", 6,
ifelse(df$months=="July", 7,
ifelse(df$months=="August", 8,
ifelse(df$months=="September", 9,
ifelse(df$months=="October", 10,
ifelse(df$months=="November", 11, 12)))))))))))
dfcar$int <- interaction(df$months, df$years, sep=" ")
dfcast <- dcast(dfcar, int + years + months + sort ~ ds, value.var="days")
dfcast <- dfcast[order(dfcast$years, dfcast$sort),] #sort by month instead of by alphabet
rownames(dfcast) <- dfcast$int
drops <- colnames(dfcast) %in% c("int", "years", "months", "sort")
dfcast <- dfcast[,!drops]
overview <- t(dfcast)
overview <- as.data.frame(overview)
colnames(overview)[!grepl("January", names(overview))] <- gsub('([A-z]+) .*', '\\1', colnames(overview))[!grepl("January", names(overview))]
d <- 1:ncol(overview)
max <- 6
x <- seq_along(d)
d1 <- split(d, ceiling(x/max))
monthc <- NULL
for (i in d1) monthc <- c(monthc, knit_child('calendarChildOverview.Rnw'))
date <- as.POSIXlt(seq(as.Date("2015/07/06"), as.Date("2017/01/01"), "days")) #start on a Monday and end on Sunday
dates <- format(date, "%d.%m") #31.01
ds <- format(date, "%d")       #31
days <- format(date, "%A")     #Monday
weeks <- strftime(date,format="%W") #1
months <- format(date, "%B")   #January
years <- format(date, "%Y")    #2015
df <- data.frame(date, dates, ds, days, weeks, months, years)
week = NULL
a <- 1:nrow(df)
b <- seq.int(1L, length(a), 7L)
date <- as.POSIXlt(seq(as.Date("2015/07/06"), as.Date("2017/01/01"), "days")) #start on a Monday and end on Sunday
dates <- format(date, "%d.%m") #31.01
ds <- format(date, "%d")       #31
days <- format(date, "%A")     #Monday
weeks <- strftime(date,format="%W") #1
months <- format(date, "%B")   #January
years <- format(date, "%Y")    #2015
years
wknds  <- ifelse(date$wday %in% c(5,6), FALSE, TRUE))
wknds  <- ifelse(date$wday %in% c(5,6), FALSE, TRUE)
wknds
wknds  <- ifelse(date$wday %in% c(5,6), TRUE, FALSE)
wknds
wknds  <- ifelse(date$wday %in% c(6,7), TRUE, FALSE)
wknds
date$wday
wknds  <- ifelse(date$wday %in% c(6,0), TRUE, FALSE)
wknds
invisible(Sys.setlocale("LC_ALL","English"))
date <- as.POSIXlt(seq(as.Date("2015/07/06"), as.Date("2017/01/01"), "days")) #start on a Monday and end on Sunday
date
dates
ds
days
weeks
months
years
wknds
df
colwknds <- ifelse(wknds, "\\cellcolor[gray]{0.95}", "")
colwknds
datArray <- abind(colwknds,overview[,i],along=3) #http://stackoverflow.com/a/6408356/4798582
library(xtable)
library(abind)  #http://stackoverflow.com/a/6408356/4798582
colwknds <- ifelse(wknds, "\\cellcolor[gray]{0.95}", "")
datArray <- abind(colwknds,overview[,i],along=3) #http://stackoverflow.com/a/6408356/4798582
datMean <- data.frame(a=rnorm(10, 3), b=rnorm(10, 3), d=rnorm(10, 3))
datSE <- data.frame(a=rnorm(10, 3)/100, b=rnorm(10, 3)/100, d=rnorm(10, 3)/100)
library(abind)
datArray <- round(abind(datMean,datSE,along=3),3)
datMean
datSE
datArray
apply(datArray,1:2,function(x)paste(x[1]-x[2],"-",x[1]+x[2]))
?abind
datArray <- round(abind(datMean,datSE,along=3),1)
datArray
datArray <- round(abind(datMean,datSE,along=3),2)
datArray
datArray <- round(abind(datMean,datSE,along=3),3)
datArray
colwknds
overview
colwknds
wknds
colwknds <- ifelse(wknds, "\\cellcolor[gray]{0.95}", "")
colwknds
a <- 1:nrow(df)
b <- seq.int(1L, length(a), 7L)
i in b
b
invisible(Sys.setlocale("LC_ALL","English"))
date <- as.POSIXlt(seq(as.Date("2015/07/01"), as.Date("2016/12/31"), "days")) #start on a Jul 01, end on Dec 31
dates <- format(date, "%d.%m") #31.01
ds <- format(date, "%d")       #31
days <- format(date, "%A")     #Monday
weeks <- strftime(date,format="%W") #1
months <- format(date, "%B")   #January
years <- format(date, "%Y")    #2015
wknds  <- ifelse(date$wday %in% c(6,0), TRUE, FALSE)  #weekends
df <- data.frame(date, dates, ds, days, weeks, months, years)
#dcast looses date format --> create dfcar with character entries of df
dfcar <- df
dfcar$days <- format(dfcar$date, "%a") #Mon
dfcar$days <- paste(dfcar$dates, dfcar$days, sep=" ") #31.01 Mon
dfcar <- apply(dfcar,1:2, function(x) as.character(x))
dfcar <- as.data.frame(dfcar)
#dcast will sort by alphabet --> create sort variable for later sorting
#http://seananderson.ca/2013/10/19/reshape.html
dfcar$sort <- ifelse(dfcar$months=="January", 1,
ifelse(df$months=="February", 2,
ifelse(df$months=="March", 3,
ifelse(df$months=="April", 4,
ifelse(df$months=="May", 5,
ifelse(df$months=="June", 6,
ifelse(df$months=="July", 7,
ifelse(df$months=="August", 8,
ifelse(df$months=="September", 9,
ifelse(df$months=="October", 10,
ifelse(df$months=="November", 11, 12)))))))))))
dfcar$int <- interaction(df$months, df$years, sep=" ")
dfcast <- dcast(dfcar, int + years + months + sort ~ ds, value.var="days")
dfcast <- dfcast[order(dfcast$years, dfcast$sort),] #sort by month instead of by alphabet
rownames(dfcast) <- dfcast$int
drops <- colnames(dfcast) %in% c("int", "years", "months", "sort")
dfcast <- dfcast[,!drops]
overview <- t(dfcast)
overview <- as.data.frame(overview)
colnames(overview)[!grepl("January", names(overview))] <- gsub('([A-z]+) .*', '\\1', colnames(overview))[!grepl("January", names(overview))]
d <- 1:ncol(overview)
max <- 6
x <- seq_along(d)
d1 <- split(d, ceiling(x/max))
monthc <- NULL
d <- 1:ncol(overview)
max <- 6
x <- seq_along(d)
d1 <- split(d, ceiling(x/max))
d1
i <- 1:6
library(xtable)
library(abind)  #http://stackoverflow.com/a/6408356/4798582
colwknds <- ifelse(wknds, "\\cellcolor[gray]{0.95}", "")
datArray <- abind(colwknds,overview[,i],along=3) #http://stackoverf
colwknds
overview
overview
overview
grepl("(Sat)|(Sun)", overview)
apply(overview, 1:2, function(x) grepl("(Sat)|(Sun)", x))
wknds <- apply(overview, 1:2, function(x) grepl("(Sat)|(Sun)", x))
colwknds <- ifelse(wknds, "\\cellcolor[gray]{0.95}", "")
datArray <- abind(colwknds,overview[,i],along=3) #http://stackoverflow.com/a/6408356/4798582
wknds
colwknds
abind(colwknds,overview[,i]
)
datArray
datArray <- abind(colwknds,overview[,i]) #http://stackoverflow.com/a/6408356/4798582
datArray
datArray <- abind(colwknds[i],overview[,i], along=3) #http://stackoverflow.com/a/6408356/4798582
datArray <- abind(colwknds[i],overview[,i]) #http://stackoverflow.com/a/6408356/4798582
colwknds[i]
colwknds
datArray <- abind(colwknds[,i],overview[,i]) #http://stackoverflow.com/a/6408356/4798582
datArray
datArray <- abind(colwknds[,i],overview[,i], along=3) #http://stackoverflow.com/a/6408356/4798582
datArray
12 %in% 6
6 %in% 21
6 %in% 12
